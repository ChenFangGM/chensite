/*
 www.chen-fang.com 2015-04-25 
*/
"use strict";

define([ "./indexPage-controller", "./portfolio-controller", "./profile-controller", "./signup-controller" ], function() {}), 
define([ "angular" ], function(a) {
    return a.module("controllerManager", []);
}), angular.module("galleryApp").controller("DatepickerCtrl", function(a) {
    a.today = function() {
        a.formData.date = new Date();
    }, a.today(), a.clear = function() {
        a.formData.date = null;
    }, a.disabled = function(a, b) {
        return "day" === b && (0 === a.getDay() || 6 === a.getDay());
    }, a.toggleMin = function() {
        a.minDate = a.minDate ? null : new Date();
    }, a.toggleMin(), a.open = function(b) {
        b.preventDefault(), b.stopPropagation(), a.opened = !0;
    }, a.dateOptions = {
        formatYear: "yy",
        startingDay: 1
    }, a.initDate = new Date("2015-09-10"), a.formData.date = new Date("2015-09-10"), 
    a.formats = [ "longDate", "dd-MMMM-yyyy", "yyyy/MM/dd", "dd.MM.yyyy" ], a.format = a.formats[0];
});

var galleryController = function(a, b, c) {
    b.formData = {}, c.get().success(function(a) {
        b.todos = a;
    }), b.createTodo = function() {
        $.isEmptyObject(b.formData) || c.create(b.formData).success(function(a) {
            b.formData = {}, b.todos = a;
        });
    }, b.deleteTodo = function(a) {
        c["delete"](a).success(function(a) {
            b.todos = a;
        });
    };
};

angular.module("galleryApp").controller("galleryController", galleryController), 
define([ "./controller-manager" ], function(a) {
    a.controller("indexPageController", function(a, b, c, d) {
        d.currentUser();
    });
}), define([ "./controller-manager", "jquery" ], function(a, b) {
    a.controller("loginController", function(a, b, c, d) {
        b(function() {
            a.items = [ "item1", "item2", "item3" ];
            var b = c.open({
                templateUrl: "src/views/login-modal.html",
                controller: "ModalInstanceCtrl",
                resolve: {
                    items: function() {
                        return a.items;
                    }
                }
            });
            b.result.then(function(b) {
                a.selected = b;
            }, function() {
                d.info("Modal dismissed at: " + new Date());
            });
        }, 500);
    }), a.controller("ModalInstanceCtrl", function(a, b, c) {
        a.items = c, a.selected = {
            item: a.items[0]
        }, a.ok = function() {
            b.close(a.selected.item);
        }, a.cancel = function() {
            b.dismiss("cancel");
        };
    });
}), define([ "./controller-manager", "jquery", "unityObject2" ], function(a, b) {
    a.controller("portfolioController", function(a) {
        a.$on("$viewContentLoaded", function() {
            var a = {
                width: 900,
                height: 600,
                params: {
                    enableDebugging: "0"
                }
            }, c = new UnityObject2(a);
            b(function() {
                var a = b("#unityPlayer").find(".missing"), d = b("#unityPlayer").find(".broken");
                a.hide(), d.hide(), c.observeProgress(function(b) {
                    switch (b.pluginStatus) {
                      case "broken":
                        d.find("a").click(function(a) {
                            return a.stopPropagation(), a.preventDefault(), c.installPlugin(), !1;
                        }), d.show();
                        break;

                      case "missing":
                        a.find("a").click(function(a) {
                            return a.stopPropagation(), a.preventDefault(), c.installPlugin(), !1;
                        }), a.show();
                        break;

                      case "installed":
                        a.remove();
                        break;

                      case "first":                    }
                });
            }), c.initPlugin(b("#unityPlayer")[0], "http://localhost:2010/dist/game/dday_web.unity3d");
        });
    });
}), define([ "./controller-manager" ], function(a) {
    a.controller("profileController", function(a, b) {});
}), define([ "./controller-manager" ], function(a) {
    a.controller("signupController", function(a, b, c, d) {
        a.register = function(b) {
            d.createUser({
                local: {
                    email: a.user.email,
                    username: a.user.username,
                    password: a.user.password
                }
            }, function(d) {
                a.errors = {}, d ? angular.forEach(d.errors, function(c, d) {
                    b[d].$setValidity("mongoose", !1), a.errors[d] = c.type;
                }) : (a.$close(), c.go("home"));
            });
        };
    });
}), angular.module("todoController", []).controller("todoController", function(a, b, c) {
    a.formData = {}, c.get().success(function(b) {
        a.todos = b;
    }), a.createTodo = function() {
        $.isEmptyObject(a.formData) || c.create(a.formData).success(function(b) {
            a.formData = {}, a.todos = b;
        });
    }, a.deleteTodo = function(b) {
        c["delete"](b).success(function(b) {
            a.todos = b;
        });
    };
}), define([ "./onFocus-directive", "./uniqueUsername-directive", "./mongooseError-directive" ], function() {}), 
define([ "angular" ], function(a) {
    return a.module("directiveManager", []);
}), define([ "./directive-manager" ], function(a) {
    a.directive("mongooseError", function() {
        return {
            restrict: "A",
            require: "ngModel",
            link: function(a, b, c, d) {
                b.on("keydown", function() {
                    return d.$setValidity("mongoose", !0);
                });
            }
        };
    });
}), define([ "./directive-manager" ], function(a) {
    a.constant("focusConfig", {
        focusClass: "focused"
    }).directive("onFocus", function(a) {
        return {
            restrict: "A",
            require: "ngModel",
            link: function(b, c, d, e) {
                e.$focused = !1, c.bind("focus", function(d) {
                    c.addClass(a.focusClass), b.$apply(function() {
                        e.$focused = !0;
                    });
                }).bind("blur", function(d) {
                    c.removeClass(a.focusClass), b.$apply(function() {
                        e.$focused = !1;
                    });
                });
            }
        };
    });
}), angular.module("angular-timeline").directive("timelineBadge", function() {
    return {
        require: "^timelineNode",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-badge" ng-transclude ></div>',
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineContent", function() {
    return {
        require: "^timelinePanel",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-body" ng-transclude></div>',
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timeline", function() {
    return {
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<ul class="timeline" ng-transclude></ul>',
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineFooter", function() {
    return {
        require: "^timelineContent",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-footer" ng-transclude></div>',
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineHeading", function() {
    return {
        require: "^timelinePanel",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-heading" ng-transclude></div>',
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineNode", function() {
    return {
        require: "^timeline",
        scope: {
            side: "@"
        },
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: "<li ng-class=\"{'timeline-inverted': side == 'right'}\" ng-transclude></li>",
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelinePanel", function() {
    return {
        require: "^timeline",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-panel" ng-transclude></div>',
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineTitle", function() {
    return {
        require: "^timelineHeading",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<h4 class="timeline-title" ng-transclude></h4>'
    };
}), define([ "./directive-manager" ], function(a) {
    a.directive("uniqueUsername", function(a) {
        return {
            restrict: "A",
            require: "ngModel",
            link: function(b, c, d, e) {
                function f(b) {
                    return b ? void a.get("/auth/check_username/" + b).success(function(a) {
                        a.exists ? e.$setValidity("unique", !1) : e.$setValidity("unique", !0);
                    }) : void e.$setValidity("unique", !0);
                }
                b.$watch(function() {
                    return e.$viewValue;
                }, f);
            }
        };
    });
}), angular.module("angular-timeline", []), angular.module("angular-timeline").directive("timelineBadge", function() {
    return {
        require: "^timelineNode",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-badge" ng-transclude ></div>',
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineContent", function() {
    return {
        require: "^timelinePanel",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-body" ng-transclude></div>',
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timeline", function() {
    return {
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<ul class="timeline" ng-transclude></ul>',
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineFooter", function() {
    return {
        require: "^timelineContent",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-footer" ng-transclude></div>',
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineHeading", function() {
    return {
        require: "^timelinePanel",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-heading" ng-transclude></div>',
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineNode", function() {
    return {
        require: "^timeline",
        scope: {
            side: "@"
        },
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: "<li ng-class=\"{'timeline-inverted': side == 'right'}\" ng-transclude></li>",
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelinePanel", function() {
    return {
        require: "^timeline",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<div class="timeline-panel" ng-transclude></div>',
        controller: function(a, b, c) {},
        link: function(a, b, c, d) {}
    };
}), angular.module("angular-timeline").directive("timelineTitle", function() {
    return {
        require: "^timelineHeading",
        restrict: "E",
        replace: !0,
        transclude: !0,
        template: '<h4 class="timeline-title" ng-transclude></h4>'
    };
}), define([ "./service-manager" ], function(a) {
    a.factory("Auth", function(a, b, c, d) {
        return a.currentUser = b.get("user") || null, b.remove("user"), {
            login: function(b, d, e) {
                var f = e || angular.noop;
                c.save({
                    provider: b,
                    email: d.email,
                    password: d.password,
                    rememberMe: d.rememberMe
                }, function(b) {
                    return a.currentUser = b, f();
                }, function(a) {
                    return f(a.data);
                });
            },
            logout: function(b) {
                var d = b || angular.noop;
                c["delete"](function(b) {
                    return a.currentUser = null, d();
                }, function(a) {
                    return d(a.data);
                });
            },
            currentUser: function() {
                c.get(function(b) {
                    a.currentUser = b;
                });
            },
            createUser: function(b, e) {
                var f = e || angular.noop;
                d.save(b, function(b) {
                    return c.save(b, function(b) {
                        return a.currentUser = b, f();
                    }, function(a) {
                        return f(a.data);
                    }), f();
                }, function(a) {
                    return f(a.data);
                });
            },
            changePassword: function(a, b, c, e) {
                var f = e || angular.noop;
                d.update({
                    email: a,
                    oldPassword: b,
                    newPassword: c
                }, function(a) {
                    return console.log("password changed"), f();
                }, function(a) {
                    return f(a.data);
                });
            },
            removeUser: function(a, b, c) {
                var e = c || angular.noop;
                d["delete"]({
                    email: a,
                    password: b
                }, function(a) {
                    return console.log(a + "removed"), e();
                }, function(a) {
                    return e(a.data);
                });
            }
        };
    });
}), define([ "./session-service", "./user-service", "./auth-service" ], function() {}), 
define([ "angular" ], function(a) {
    return a.module("serviceManager", []);
}), define([ "./service-manager" ], function(a) {
    a.factory("Session", function(a) {
        return a("/auth/session/");
    });
}), angular.module("todoService", []).factory("Todos", function(a) {
    return {
        get: function() {
            return a.get("/api/todos");
        },
        create: function(b) {
            return a.post("/api/todos", b);
        },
        "delete": function(b) {
            return a["delete"]("/api/todos/" + b);
        }
    };
}), define([ "./service-manager" ], function(a) {
    a.factory("User", function(a) {
        var b = a("/auth/user/:id", {}, {
            update: {
                method: "PUT"
            }
        });
        return b;
    });
}), function(a, b, c, d, e, f, g) {
    a.GoogleAnalyticsObject = e, a[e] = a[e] || function() {
        (a[e].q = a[e].q || []).push(arguments);
    }, a[e].l = 1 * new Date(), f = b.createElement(c), g = b.getElementsByTagName(c)[0], 
    f.async = 1, f.src = d, g.parentNode.insertBefore(f, g);
}(window, document, "script", "//www.google-analytics.com/analytics.js", "ga"), 
ga("create", "UA-60711230-1", "auto"), ga("send", "pageview");

var unityObject = {
    javaInstallDone: function(a, b, c) {
        var d = parseInt(a.substring(a.lastIndexOf("_") + 1), 10);
        isNaN(d) || setTimeout(function() {
            UnityObject2.instances[d].javaInstallDoneCallback(a, b, c);
        }, 10);
    }
}, UnityObject2 = function(a) {
    function b(a) {
        var b = new RegExp(escape(a) + "=([^;]+)");
        return b.test(u.cookie + ";") ? (b.exec(u.cookie + ";"), RegExp.$1) : !1;
    }
    function c(a, b) {
        document.cookie = escape(a) + "=" + escape(b) + "; path=/";
    }
    function d(a) {
        var b, c, d, e, f, g = 0;
        if (a) {
            var h = a.toLowerCase().match(/^(\d+)(?:\.(\d+)(?:\.(\d+)([dabfr])?(\d+)?)?)?$/);
            h && h[1] && (b = h[1], c = h[2] ? h[2] : 0, d = h[3] ? h[3] : 0, e = h[4] ? h[4] : "r", 
            f = h[5] ? h[5] : 0, g |= b / 10 % 10 << 28, g |= b % 10 << 24, g |= c % 10 << 20, 
            g |= d % 10 << 16, g |= {
                d: 8192,
                a: 16384,
                b: 24576,
                f: 32768,
                r: 32768
            }[e], g |= f / 100 % 10 << 8, g |= f / 10 % 10 << 4, g |= f % 10);
        }
        return g;
    }
    function e(a, b) {
        var c = V.pluginVersionChecker.container, d = u.createElement("object"), e = 0;
        c && d ? (d.setAttribute("type", V.pluginMimeType), d.setAttribute("id", V.pluginVersionChecker.id), 
        V.pluginVersionChecker.hide && (d.style.visibility = "hidden"), c.appendChild(d), 
        function() {
            if ("undefined" == typeof d.GetPluginVersion) setTimeout(arguments.callee, 100); else {
                var f = {};
                if (b) for (e = 0; e < b.length; ++e) f[b[e]] = d.GetUnityVersion(b[e]);
                f.plugin = d.GetPluginVersion(), c.removeChild(d), a(f);
            }
        }()) : a(null);
    }
    function f() {
        var a = "";
        return a = W.x64 ? V.fullInstall ? "UnityWebPlayerFull64.exe" : "UnityWebPlayer64.exe" : V.fullInstall ? "UnityWebPlayerFull.exe" : "UnityWebPlayer.exe", 
        null !== V.referrer && (a += "?referrer=" + V.referrer), a;
    }
    function g() {
        var a = "UnityPlayer.plugin.zip";
        return null != V.referrer && (a += "?referrer=" + V.referrer), a;
    }
    function h() {
        return V.baseDownloadUrl + (W.win ? f() : g());
    }
    function i(a, b, c, d) {
        a === M && (T = !0), -1 === jQuery.inArray(a, K) && (T && X.send(a, b, c, d), K.push(a)), 
        J = a;
    }
    function j(a, b, c) {
        var d, e, f, g, h;
        if (W.win && W.ie) {
            e = "";
            for (d in a) e += " " + d + '="' + a[d] + '"';
            f = "";
            for (d in b) f += '<param name="' + d + '" value="' + b[d] + '" />';
            c.outerHTML = "<object" + e + ">" + f + "</object>";
        } else {
            g = u.createElement("object");
            for (d in a) g.setAttribute(d, a[d]);
            for (d in b) h = u.createElement("param"), h.name = d, h.value = b[d], g.appendChild(h);
            c.parentNode.replaceChild(g, c);
        }
    }
    function k(a) {
        B = !0, c(A, B);
        var b = u.getElementById(a), d = a + "_applet_" + w;
        F[d] = {
            attributes: V.attributes,
            params: V.params,
            callback: V.callback,
            broken: V.broken
        };
        var e = F[d], f = {
            id: d,
            type: "application/x-java-applet",
            archive: V.baseDownloadUrl + "3.0/jws/UnityWebPlayer.jar",
            code: "UnityWebPlayer",
            width: 1,
            height: 1,
            name: "Unity Web Player"
        };
        W.win && W.ff && (f.style = "visibility: hidden;");
        var g = {
            context: d,
            jnlp_href: V.baseDownloadUrl + "3.0/jws/UnityWebPlayer.jnlp",
            classloader_cache: !1,
            installer: h(),
            image: z + "installation/unitylogo.png",
            centerimage: !0,
            boxborder: !1,
            scriptable: !0,
            mayscript: !0
        };
        for (var i in e.params) "src" != i && e.params[i] != Object.prototype[i] && (g[i] = e.params[i], 
        "logoimage" == i.toLowerCase() ? g.image = e.params[i] : "backgroundcolor" == i.toLowerCase() ? g.boxbgcolor = "#" + e.params[i] : "bordercolor" == i.toLowerCase() ? g.boxborder = !0 : "textcolor" == i.toLowerCase() && (g.boxfgcolor = "#" + e.params[i]));
        var k = u.createElement("div");
        b.appendChild(k), j(f, g, k), jQuery("#" + a).show();
    }
    function l(a) {
        setTimeout(function() {
            var b = u.getElementById(a);
            b && b.parentNode.removeChild(b);
        }, 0);
    }
    function m(a) {
        var b, c = F[a], d = u.getElementById(a);
        if (d) {
            d.width = c.attributes.width || 600, d.height = c.attributes.height || 450;
            for (var e = d.parentNode, f = e.childNodes, g = 0; g < f.length; g++) b = f[g], 
            1 == b.nodeType && b != d && e.removeChild(b);
        }
    }
    function n(a, b, c) {
        o("_javaInstallDoneCallback", a, b, c), b || i(Q, S, c);
    }
    function o() {
        t.push(arguments), V.debugLevel > 1 && window.console && window.console.log && console.log(Array.prototype.slice.call(arguments));
    }
    function p(a) {
        return /^[-+]?[0-9]+$/.test(a) && (a += "px"), a;
    }
    function q(a, b) {
        var c, f = M;
        if (v.plugins.refresh(), "??" === W.clientBrand || "???" === W.clientPlatform || W.mobile) f = O; else if (W.op && W.mac) f = O, 
        c = "OPERA-MAC"; else if ("undefined" != typeof v.plugins && v.plugins[V.pluginName] && "undefined" != typeof v.mimeTypes && v.mimeTypes[V.pluginMimeType] && v.mimeTypes[V.pluginMimeType].enabledPlugin) {
            if (f = L, W.sf && /Mac OS X 10_6/.test(v.appVersion)) return void e(function(b) {
                b && b.plugin || (f = N, c = "OSX10.6-SFx64"), a(f, I, c, b);
            }, b);
            if (W.mac && W.ch) return void e(function(b) {
                b && d(b.plugin) <= d("2.6.1f3") && (f = N, c = "OSX-CH-U<=2.6.1f3"), a(f, I, c, b);
            }, b);
            if (b) return void e(function(b) {
                a(f, I, c, b);
            }, b);
        } else if (W.ie) {
            var g = !1;
            try {
                null != ActiveXObject.prototype && (g = !0);
            } catch (h) {}
            if (g) {
                f = M;
                try {
                    var i = new ActiveXObject("UnityWebPlayer.UnityWebPlayer.1"), j = i.GetPluginVersion();
                    if (b) {
                        for (var k = {}, l = 0; l < b.length; ++l) k[b[l]] = i.GetUnityVersion(b[l]);
                        k.plugin = j;
                    }
                    if (f = L, "2.5.0f5" == j) {
                        var m = /Windows NT \d+\.\d+/.exec(v.userAgent);
                        if (m && m.length > 0) {
                            var n = parseFloat(m[0].split(" ")[2]);
                            n >= 6 && (f = N, c = "WIN-U2.5.0f5");
                        }
                    }
                } catch (h) {}
            } else f = O, c = "ActiveXFailed";
        }
        a(f, I, c, k);
    }
    function r(a, b) {
        q(function(b, c, d, e) {
            a(b, e);
        }, b);
    }
    function s(a, b) {
        q(function(b, c, d, e) {
            i(b, c, d), a(b, e);
        }, b);
    }
    var t = [], u = (window, document), v = navigator, w = null, x = [], y = "https:" == document.location.protocol, z = y ? "https://ssl-webplayer.unity3d.com/" : "http://webplayer.unity3d.com/", A = "_unity_triedjava", B = b(A), C = "_unity_triedclickonce", D = b(C), E = !1, F = [], G = null, H = null, I = null, J = null, K = [], L = "installed", M = "missing", N = "broken", O = "unsupported", P = "start", Q = "error", R = "first", S = "java", T = !1, U = null, V = {
        pluginName: "Unity Player",
        pluginMimeType: "application/vnd.unity",
        baseDownloadUrl: z + "download_webplayer-3.x/",
        fullInstall: !1,
        autoInstall: !1,
        enableJava: !0,
        enableJVMPreloading: !1,
        enableClickOnce: !0,
        enableUnityAnalytics: !1,
        enableGoogleAnalytics: !0,
        params: {},
        attributes: {},
        referrer: null,
        debugLevel: 0,
        pluginVersionChecker: {
            container: jQuery("body")[0],
            hide: !0,
            id: "version-checker"
        }
    };
    V = jQuery.extend(!0, V, a), "" === V.referrer && (V.referrer = null), y && (V.enableUnityAnalytics = !1);
    var W = function() {
        function a(a, b) {
            for (var c = 0; c < Math.max(a.length, b.length); ++c) {
                var d = c < a.length && a[c] ? new Number(a[c]) : 0, e = c < b.length && b[c] ? new Number(b[c]) : 0;
                if (e > d) return -1;
                if (d > e) return 1;
            }
            return 0;
        }
        var b = v.userAgent, c = v.platform, d = /chrome/i.test(b), e = !1;
        /msie/i.test(b) ? e = parseFloat(b.replace(/^.*msie ([0-9]+(\.[0-9]+)?).*$/i, "$1")) : /Trident/i.test(b) && (e = parseFloat(b.replace(/^.*rv:([0-9]+(\.[0-9]+)?).*$/i, "$1")));
        var f = {
            w3: "undefined" != typeof u.getElementById && "undefined" != typeof u.getElementsByTagName && "undefined" != typeof u.createElement,
            win: /win/i.test(c ? c : b),
            mac: /mac/i.test(c ? c : b),
            ie: e,
            ff: /firefox/i.test(b),
            op: /opera/i.test(b),
            ch: d,
            ch_v: /chrome/i.test(b) ? parseFloat(b.replace(/^.*chrome\/(\d+(\.\d+)?).*$/i, "$1")) : !1,
            sf: /safari/i.test(b) && !d,
            wk: /webkit/i.test(b) ? parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/i, "$1")) : !1,
            x64: /win64/i.test(b) && /x64/i.test(b),
            moz: /mozilla/i.test(b) ? parseFloat(b.replace(/^.*mozilla\/([0-9]+(\.[0-9]+)?).*$/i, "$1")) : 0,
            mobile: /ipad/i.test(c) || /iphone/i.test(c) || /ipod/i.test(c) || /android/i.test(b) || /windows phone/i.test(b)
        };
        f.clientBrand = f.ch ? "ch" : f.ff ? "ff" : f.sf ? "sf" : f.ie ? "ie" : f.op ? "op" : "??", 
        f.clientPlatform = f.win ? "win" : f.mac ? "mac" : "???";
        for (var g = u.getElementsByTagName("script"), h = 0; h < g.length; ++h) {
            var i = g[h].src.match(/^(.*)3\.0\/uo\/UnityObject2\.js$/i);
            if (i) {
                V.baseDownloadUrl = i[1];
                break;
            }
        }
        return f.java = function() {
            function b(a) {
                try {
                    return null != new ActiveXObject("JavaWebStart.isInstalled." + a + ".0");
                } catch (b) {
                    return !1;
                }
            }
            function c(a) {
                try {
                    return null != new ActiveXObject("JavaPlugin.160_" + a);
                } catch (b) {
                    return !1;
                }
            }
            if (v.javaEnabled()) {
                var d = f.win && f.ff, e = !1;
                if (d || e) {
                    if ("undefined" != typeof v.mimeTypes) for (var g = d ? [ 1, 6, 0, 12 ] : [ 1, 4, 2, 0 ], h = 0; h < v.mimeTypes.length; ++h) if (v.mimeTypes[h].enabledPlugin) {
                        var i = v.mimeTypes[h].type.match(/^application\/x-java-applet;(?:jpi-)?version=(\d+)(?:\.(\d+)(?:\.(\d+)(?:_(\d+))?)?)?$/);
                        if (null != i && a(g, i.slice(1)) <= 0) return !0;
                    }
                } else if (f.win && f.ie && "undefined" != typeof ActiveXObject) {
                    if (b("1.7.0")) return !0;
                    if (!(f.ie >= 8)) return b("1.6.0") || b("1.5.0") || b("1.4.2");
                    if (b("1.6.0")) {
                        for (var h = 12; 50 >= h; ++h) if (c(h)) {
                            if (9 == f.ie && 5 == f.moz && 24 > h) continue;
                            return !0;
                        }
                        return !1;
                    }
                }
            }
            return !1;
        }(), f.co = function() {
            if (f.win && f.ie) {
                var c = b.match(/(\.NET CLR [0-9.]+)|(\.NET[0-9.]+)/g);
                if (null != c) for (var d = [ 3, 5, 0 ], e = 0; e < c.length; ++e) {
                    var g = c[e].match(/[0-9.]{2,}/g)[0].split(".");
                    if (a(d, g) <= 0) return !0;
                }
            }
            return !1;
        }(), f;
    }(), X = function() {
        function a() {
            return Math.floor(2147483647 * Math.random());
        }
        function b() {
            for (var a = ("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js", b = u.getElementsByTagName("script"), c = !1, d = 0; d < b.length; ++d) if (b[d].src && b[d].src.toLowerCase() == a.toLowerCase()) {
                c = !0;
                break;
            }
            if (!c) {
                var e = u.createElement("script");
                e.type = "text/javascript", e.async = !0, e.src = a;
                var f = document.getElementsByTagName("script")[0];
                f.parentNode.insertBefore(e, f);
            }
            var h = 0 === V.debugLevel ? "UA-16068464-16" : "UA-16068464-17";
            g.push([ "unity._setDomainName", "none" ]), g.push([ "unity._setAllowLinker", !0 ]), 
            g.push([ "unity._setReferrerOverride", " " + this.location.toString() ]), g.push([ "unity._setAccount", h ]);
        }
        function c(a, b, c, d) {
            if (!V.enableUnityAnalytics) return void (d && d());
            var g = "http://unityanalyticscapture.appspot.com/event?u=" + encodeURIComponent(e) + "&s=" + encodeURIComponent(f) + "&e=" + encodeURIComponent(a);
            null !== V.referrer && (g += "?r=" + V.referrer), b && (g += "&t=" + encodeURIComponent(b)), 
            c && (g += "&d=" + encodeURIComponent(c));
            var h = new Image();
            d && (h.onload = h.onerror = d), h.src = g;
        }
        function d(a, b, c, d) {
            if (!V.enableGoogleAnalytics) return void (d && d());
            var e = "/webplayer/install/" + a, f = "?";
            b && (e += f + "t=" + encodeURIComponent(b), f = "&"), c && (e += f + "d=" + encodeURIComponent(c), 
            f = "&"), d && g.push(function() {
                setTimeout(d, 1e3);
            });
            var h = V.src;
            if (h.length > 40) {
                h = h.replace("http://", "");
                var i = h.split("/"), j = i.shift(), k = i.pop();
                for (h = j + "/../" + k; h.length < 40 && i.length > 0; ) {
                    var l = i.pop();
                    k = h.length + l.length + 5 < 40 ? l + "/" + k : "../" + k, h = j + "/../" + k;
                }
            }
            g.push([ "unity._setCustomVar", 2, "GameURL", h, 3 ]), g.push([ "unity._setCustomVar", 1, "UnityObjectVersion", "2", 3 ]), 
            b && g.push([ "unity._setCustomVar", 3, "installMethod", b, 3 ]), g.push([ "unity._trackPageview", e ]);
        }
        var e = function() {
            var b = new Date(), c = Date.UTC(b.getUTCFullYear(), b.getUTCMonth(), b.getUTCDay(), b.getUTCHours(), b.getUTCMinutes(), b.getUTCSeconds(), b.getUTCMilliseconds());
            return c.toString(16) + a().toString(16);
        }(), f = 0, g = window._gaq = window._gaq || [];
        return b(), {
            send: function(a, b, e, g) {
                (V.enableUnityAnalytics || V.enableGoogleAnalytics) && o("Analytics SEND", a, b, e, g), 
                ++f;
                var h = 2, i = function() {
                    0 == --h && (G = null, window.location = g);
                };
                (null === e || void 0 === e) && (e = ""), c(a, b, e, g ? i : null), d(a, b, e, g ? i : null);
            }
        };
    }(), Y = {
        getLogHistory: function() {
            return t;
        },
        getConfig: function() {
            return V;
        },
        getPlatformInfo: function() {
            return W;
        },
        initPlugin: function(a, b) {
            V.targetEl = a, V.src = b, o("ua:", W);
            var c = this;
            s(function(a, b) {
                c.handlePluginStatus(a, b);
            });
        },
        detectUnity: function(a, b) {
            var c = this;
            r(function(b, d) {
                a.call(c, b, d);
            }, b);
        },
        handlePluginStatus: function(a, b) {
            var c = V.targetEl, d = jQuery(c);
            switch (a) {
              case L:
                this.notifyProgress(d), this.embedPlugin(d, V.callback);
                break;

              case M:
                this.notifyProgress(d);
                var e = this, f = 0 === V.debugLevel ? 1e3 : 8e3;
                setTimeout(function() {
                    V.targetEl = c, e.detectUnity(e.handlePluginStatus);
                }, f);
                break;

              case N:
                this.notifyProgress(d);
                break;

              case O:
                this.notifyProgress(d);
            }
        },
        getPluginURL: function() {
            var a = "http://unity3d.com/webplayer/";
            return W.win ? a = V.baseDownloadUrl + f() : "MacIntel" == v.platform ? (a = V.baseDownloadUrl + (V.fullInstall ? "webplayer-i386.dmg" : "webplayer-mini.dmg"), 
            null !== V.referrer && (a += "?referrer=" + V.referrer)) : "MacPPC" == v.platform && (a = V.baseDownloadUrl + (V.fullInstall ? "webplayer-ppc.dmg" : "webplayer-mini.dmg"), 
            null !== V.referrer && (a += "?referrer=" + V.referrer)), a;
        },
        getClickOnceURL: function() {
            return V.baseDownloadUrl + "3.0/co/UnityWebPlayer.application?installer=" + encodeURIComponent(V.baseDownloadUrl + f());
        },
        embedPlugin: function(a, b) {
            a = jQuery(a).empty();
            var c = V.src, d = V.width || "100%", e = V.height || "100%";
            if (W.win && W.ie) {
                var f = "";
                for (var g in V.attributes) V.attributes[g] != Object.prototype[g] && ("styleclass" == g.toLowerCase() ? f += ' class="' + V.attributes[g] + '"' : "classid" != g.toLowerCase() && (f += " " + g + '="' + V.attributes[g] + '"'));
                var h = "";
                h += '<param name="src" value="' + c + '" />', h += '<param name="firstFrameCallback" value="UnityObject2.instances[' + w + '].firstFrameCallback();" />';
                for (var g in V.params) V.params[g] != Object.prototype[g] && "classid" != g.toLowerCase() && (h += '<param name="' + g + '" value="' + V.params[g] + '" />');
                var i = '<object classid="clsid:444785F1-DE89-4295-863A-D46C3A781394" style="display: block; width: ' + p(d) + "; height: " + p(e) + ';"' + f + ">" + h + "</object>", j = jQuery(i);
                a.append(j), x.push(a.attr("id")), U = j[0];
            } else {
                var k = jQuery("<embed/>").attr({
                    src: c,
                    type: V.pluginMimeType,
                    width: d,
                    height: e,
                    firstFrameCallback: "UnityObject2.instances[" + w + "].firstFrameCallback();"
                }).attr(V.attributes).attr(V.params).css({
                    display: "block",
                    width: p(d),
                    height: p(e)
                }).appendTo(a);
                U = k[0];
            }
            W.sf && W.mac || setTimeout(function() {
                U.focus();
            }, 100), b && b();
        },
        getBestInstallMethod: function() {
            var a = "Manual";
            return W.x64 ? a : (V.enableJava && W.java && B === !1 ? a = "JavaInstall" : V.enableClickOnce && W.co && D === !1 && (a = "ClickOnceIE"), 
            a);
        },
        installPlugin: function(a) {
            (null == a || void 0 == a) && (a = this.getBestInstallMethod());
            switch (a) {
              case "JavaInstall":
                this.doJavaInstall(V.targetEl.id);
                break;

              case "ClickOnceIE":
                D = !0, c(C, D);
                var b = jQuery("<iframe src='" + this.getClickOnceURL() + "' style='display:none;' />");
                jQuery(V.targetEl).append(b);
                break;

              default:
              case "Manual":
                var b = jQuery("<iframe src='" + this.getPluginURL() + "' style='display:none;' />");
                jQuery(V.targetEl).append(b);
            }
            I = a, X.send(P, a, null, null);
        },
        trigger: function(a, b) {
            b ? o('trigger("' + a + '")', b) : o('trigger("' + a + '")'), jQuery(document).trigger(a, b);
        },
        notifyProgress: function(a) {
            if ("undefined" != typeof E && "function" == typeof E) {
                var b = {
                    ua: W,
                    pluginStatus: J,
                    bestMethod: null,
                    lastType: I,
                    targetEl: V.targetEl,
                    unityObj: this
                };
                J === M && (b.bestMethod = this.getBestInstallMethod()), H !== J && (H = J, E(b));
            }
        },
        observeProgress: function(a) {
            E = a;
        },
        firstFrameCallback: function() {
            o("*** firstFrameCallback (" + w + ") ***"), J = R, this.notifyProgress(), T === !0 && X.send(J, I);
        },
        setPluginStatus: function(a, b, c, d) {
            i(a, b, c, d);
        },
        doJavaInstall: function(a) {
            k(a);
        },
        jvmPreloaded: function(a) {
            l(a);
        },
        appletStarted: function(a) {
            m(a);
        },
        javaInstallDoneCallback: function(a, b, c) {
            n(a, b, c);
        },
        getUnity: function() {
            return U;
        }
    };
    return w = UnityObject2.instances.length, UnityObject2.instances.push(Y), Y;
};

UnityObject2.instances = [], define([ "jquery" ], function(a) {
    a(function() {
        a("a[href*=#]:not([href=#])").click(function() {
            if (location.pathname.replace(/^\//, "") == this.pathname.replace(/^\//, "") && location.hostname == this.hostname) {
                var b = a(this.hash);
                if (b = b.length ? b : a("[name=" + this.hash.slice(1) + "]"), b.length) return a("html,.theme").animate({
                    scrollTop: b.offset().top
                }, 800), !1;
            }
        });
        for (var b = a(".intro nav a"), c = [], d = 0; d < b.length; d++) {
            var f = b[d], g = a(f).attr("href");
            c.push(g);
        }
        a(window).scroll(function() {
            for (var b = a(window).scrollTop(), d = a(window).height(), e = a(document).height(), f = 0; f < c.length; f++) {
                var g = c[f], h = a(g).offset().top, i = a(g).height();
                b >= h && h + i > b ? a("a[href='" + g + "']").addClass("active") : a("a[href='" + g + "']").removeClass("active");
            }
            if (b + d == e && !a(".intro nav a").hasClass("active")) {
                var j = a(".active").attr("href");
                a("a[href='" + j + "']").removeClass("active"), a(".intro nav a").addClass("active");
            }
        }), a(".theme > nav .hamburger").click(function() {
            a(".theme > nav div").slideToggle();
        }), a("section, .theme > nav div a").click(function() {
            a(".theme > nav div").slideUp();
        }), a(".experience .content.expandable .item, .testimonials .content.expandable .testimonial").click(function() {
            a(this).addClass("expanded"), a(this).children(".item-description").stop().slideDown(), 
            a(this).children(".base").children(".expand-icon").addClass("close");
        }), a(".experience .content.expandable .item, .testimonials .content.expandable .testimonial").on("click", ".expand-icon.close", function() {
            a(this).parent().parent().removeClass("expanded"), a(this).parent().siblings(".item-description").stop().slideUp(), 
            a(this).removeClass("close"), e.stopPropagation();
        });
    });
});